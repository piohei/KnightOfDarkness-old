<?php

class ChangeLog {

	private function _make(){
	  $this->_addChange('2011-04-13','Zwiêkszenie pojemno¶ci karczmy z 40 do 60 wiadomoœci');
	  $this->_addChange('2011-04-13','Zwiêkszenie pojemno¶ci skrzynki wiadomoœci z 20 do 40');
	  $this->_addChange('2011-04-13','Zmniejszenie z 14dni do 10dni odstêpu miêdzy zastêpstwami ');
		
		
	  $this->_addChange('2011-04-10','Naprawiony b³±d z trenowaniem szpiegów');
	  $this->_addChange('2011-04-10','Poprawione kilka literówek');
	  $this->_addChange('2011-04-10','Naprawiony b³±d przy rejestracji');
	  $this->_addChange('2011-04-10','Wprowadzenie mo¿liwoœci u¿ywania polskich znaków oraz spacji w nazwie koalicji');
		
	  $this->_addChange('2011-03-15','Naprawiony b³±d z wy¶wietlaniem postêpu budowy zamków');
	  $this->_addChange('2011-03-15','Naprawiony b³±d z wysy³aniem wiadomo¶ci do siebie');
	  $this->_addChange('2011-03-15','Naprawiony b³±d z usuwaniem przez cesarza raportów udostêpnionych');
	  
	  $this->_addChange('2010-12-23','Dodana mo¿liwo¶c PM, ataku i dodania do ksiêgi znajomych z zak³±dki info o ksiêstwie');
	
	  $this->_addChange('2010-11-07','Poprawiona godzina');
	  $this->_addChange('2010-11-07','Poprawiony b³±d z targiem');

	  $this->_addChange('2010-11-05','Poprawione górne menu dla Mozilli');
	  $this->_addChange('2010-11-05','Naprawiony b³±d z rynkiem');
	  
	  $this->_addChange('2010-11-02','Dodawanie wtyczki facebooka na stronê g³ówn±');	
		
	  $this->_addChange('2010-10-29','Poprawione polskie litery we wszystkich zak³adkach');
	  $this->_addChange('2010-10-29','Dodawanie tur o parzystych godzinach');
	
	  $this->_addChange('2010-08-05','Poprawione wy¶wietlanie nicków w SB');
	  $this->_addChange('2010-08-05','Dodanie zak³adki "forum" kosztem zak³adki "ksiêga znajomych"');
	  $this->_addChange('2010-08-05','Dodawanie tur o nieparzystych godzinach');
	
	  $this->_addChange('2010-04-19','Bonusy w zakladce ksiestwo !');
	  $this->_addChange('2010-04-19','Zmniejszenie minimalnego morale przy propagandzie do -20');
	  $this->_addChange('2010-04-19','Skrocenie czasu do pojawienia sie aukcji na targu');

	  $this->_addChange('2010-04-18','Na stronie glownej pokzauje sie najbardziej rozbudowany budynek koncowy z linkiem do wyslania ataku');
	  $this->_addChange('2010-04-06','Zmiana pojemnosci zamkow, teraz jest opisana przez funckje e');

	  $this->_addChange('2010-03-11','Skrocony okres ochronny dla nowych kont starych graczy zakladanych w trakcie trwania ery, oznacza to ze okres ochronny dla tych ksiestw pozostanie nie zmieniony');
	  $this->_addChange('2010-03-06','Poprawienie rankingu wojownikow, teraz liczy sie obrona i atak');
	  
	  $this->_addChange('2010-01-04','Zwiêkszenie pojemno¶ci gildi szpiegów');
	  
	  $this->_addChange('2009-11-15','Poprawione bledy z atakami');
	    
		$this->_addChange('2009-10-17',' Zmienila sie pojemnosc zamkow');
		$this->_addChange('2009-10-17',' Zwiekszyla sie obrona piechoty, teraz 14');
		$this->_addChange('2009-10-17',' Zwiekszyl sie bonus do obrony z zamku');
		$this->_addChange('2009-10-17',' Zmniejszylo sie morale przy ktorym wybucha bunt, teraz to -50');
		$this->_addChange('2009-10-17',' Poprawiony blad z mnozeniem sie armii');
		$this->_addChange('2009-10-17',' Poprawiony blad z mnozeniem sie surowców');
		$this->_addChange('2009-10-17',' Honorowe tytuly dla graczy, podstawowy to szlachcic');
		
		$this->_addChange('2009-09-22','Atak koalicyjny zostal zablokowany');
	
		$this->_addChange('2009-08-27','Bezpieczeñstwo wlicza sie do wzrou na obrone przed szpiegami.');
		$this->_addChange('2009-08-27','Nowe typy bs dla szpiegów, zwiêkszaj±ce kradzi¿ i mordowanie ludzi');
		
		$this->_addChange('2009-08-23','Zwiêkszenie podatków');
		$this->_addChange('2009-08-23','Raporty od szpiegów losowo daj± informacje');
		$this->_addChange('2009-08-23','Zamki zajmuj± ziemie');
		$this->_addChange('2009-08-23','Wy¶wietlanie typu wys³anego ataku');
		
		$this->_addChange('2009-08-19','Nowy atak szpiegami \"propaganda\"');		
		$this->_addChange('2009-08-19','Nowy atak \"Oblê¿enie\"');
		$this->_addChange('2009-08-19','Nowy budynek \"zamek\"');		
		$this->_addChange('2009-08-19','Nowe wartosci ³adwono¶ci tragarzy');
		$this->_addChange('2009-08-19','Poprawiony b³±d ze spisem budynków specjalnych');
		$this->_addChange('2009-08-19','Zmniejszony koszt Budynku Koñcowego do 100M PB');
						
		$this->_addChange('2009-08-12','Przekazywanie raportow w koalicji');
		$this->_addChange('2009-08-12','Okres ochronny zalezny od ilosci ziemi');
		$this->_addChange('2009-08-12','Kosciol powroci :)');
		$this->_addChange('2009-08-12','Zaleznosc ilosci wojska od ziemi, wartosc moze jeszcze ulec zmianie');
		$this->_addChange('2009-08-12','Nowy modul dla mh');
		$this->_addChange('2009-08-12','Nowy ranking, tak zeby wojownicy tez mogli sie poscigac.');
		$this->_addChange('2009-08-04','poprawiona informacja o BK w pomocy');
		$this->_addChange('2009-07-12','poprawione sortowanie aukcji na rynku, teraz pojawiaja sie najnowsze i najtansze aukcjie');

		$this->_addChange('2009-07-04','okres ochronny zostal zwiekszony do 14 dni');
		$this->_addChange('2009-07-04','zlapani szpiedzy moga byc torturowani');
		$this->_addChange('2009-07-04','zostaly zwiekszone koszty budynku koncowego');
		$this->_addChange('2009-07-04','zwiekszone maksymalne zniszczenie jednym atakiem na BK');
		$this->_addChange('2009-07-04','zmniejszenie kosztów budynków gospodarczych');
		$this->_addChange('2009-07-04','zwiekszona minimalna ilosc zlota');
		$this->_addChange('2009-07-04','zwiêkszona cena minimalna i maksymalna na targu');
	
		$this->_addChange('2009-07-03','opis nowych bs pojawi sie na forum');
		$this->_addChange('2009-07-03','zwiêkszenie pojemno¶ci wie¿ do 15 ³uczników');
		$this->_addChange('2009-07-02','dodatkowe poziomy do niektórych BS');
		$this->_addChange('2009-07-02','zmienione ceny i bonusy Budynków Specjalnych');
		$this->_addChange('2009-07-01','nowy serwer');
		$this->_addChange('2009-03-15','przy rozwi±zywaniu koalicji oraz przy zmianie cesarza wszystkie zaproszenia s± kasowane');
		$this->_addChange('2009-03-15','w zak³adce zarz±dzanie koalicj± jest mo¿liwo¶æ przejrzenia hostorii zaproszeñ i manipulacji tymi zaproszeniami (dostêpne tylko dla cesarza)(dodane przez bogwiedz)');
		$this->_addChange('2009-03-08','usuniêcie limitów na rekrutacjê szpiegów, czyli mo¿na rekrutowaæ dowoln± liczbê szpiegów niezale¿nie od ilo¶ci miejsc w gildiiach (oczywi¶cie je¶li przy wykonaniu tury w ksiêstwie bêdzie wiêcej szpiegów ni¿ miejsc w gidiach to nadmiar szpiegów odejdzie)');
		$this->_addChange('2009-03-01','poprawienie ataku koalicyjnego');
		$this->_addChange('2009-03-01','w szczegó³ach ataku koalicyjnego cesarz mo¿e ogl±daæ ilo¶ci wysy³anych na niego wojsk z poszczególnych ksiêstw');
		$this->_addChange('2009-03-01','dodatkowy raport podsumowuj±cy atak koalicyjny - tylko dla cesarza');
		$this->_addChange('2009-03-01','skrócenie czasu trwania ataku koalicyjnego o 4 tury (maksymalnie mo¿e on trwaæ 12 tur, z BSami cesarza 7)');
	}

	private static $singleton = null;

	/**
	 * Zwraca singleton
	 * @access public static
	 * @return class ChangeLog singleton
	 */
	static function getChangeLog(){
		if (! isset(ChangeLog::$singleton)){
			ChangeLog::$singleton = new ChangeLog();
		}
		return ChangeLog::$singleton;
	}


	var $changes = array();

	private function ChangeLog(){
		$this->_make();
		krsort($this->changes,SORT_STRING);
	}

	private function _addChange($date,$message){
		$d = array();
		$d['date'] = $date;
		$d['message'] = $message;
		$this->changes[$date][] = $d;
	}

	public function getChanges(){
		return $this->changes;
	}

	public function getLastChangeDate(){
		$keys = array_keys($this->changes);
		return $keys[0];
	}

	public function markLastChange(){
		$date = $this->getLastChangeDate();
		if (strtotime($date) > strtotime("now")-4*24*3600){
			return true;
		}
		return false;
	}

}





?>
